schema {
  query: QueryRoot
  mutation: MutationRoot
}

# Directs the executor to query only when the field exists.
directive @ifdef on FIELD

type Article {
  id: ObjectId!
  username: String!
  subject: String!
  slug: String!
  uri: String!
  content: String!
  createdAt: DateTime!
  updatedAt: DateTime!
  published: Boolean!
  top: Boolean!
  recommended: Boolean!
}

input ArticleNew {
  username: String!
  subject: String!
  content: String!
  createdAt: DateTime!
  updatedAt: DateTime!
}

scalar DateTime

type MutationRoot {
  userRegister(userNew: UserNew!): User!
  userChangePassword(pwdCur: String!, pwdNew: String!, token: String!): User!
  userUpdateProfile(userNew: UserNew!, token: String!): User!
  articleNew(articleNew: ArticleNew!): Article!
}

scalar ObjectId

type QueryRoot {
  userById(id: ObjectId!): User!
  userByEmail(email: String!): User!
  userByUsername(username: String!): User!
  userSignIn(autograph: String!, password: String!): SignInfo!
  usersList(token: String!): [User!]!
  articlesList: [Article!]!
  articlesByUsername(username: String!): [Article!]!
  articleBySlug(username: String!, slug: String!): Article!
}

type SignInfo {
  email: String!
  username: String!
  token: String!
}

type User {
  id: ObjectId!
  email: String!
  username: String!
  nickname: String!
  blogName: String!
  website: String!
  createdAt: DateTime!
  updatedAt: DateTime!
  banned: Boolean!
  articles: [Article!]!
}

input UserNew {
  email: String!
  username: String!
  nickname: String!
  cred: String!
  blogName: String!
  website: String!
  createdAt: DateTime!
  updatedAt: DateTime!
}
